# 东软-实训-linux-2024.2.27

### 在忘记密码情况下,如何修改root用户密码
在GRUB 引导选择模式中按“e”进入内核编辑模式, 在linux行末尾添加``` rd.break```
> rd.break 语句
> 在Linux引导程序中，编辑内核启动参数（kernel boot parameters）时加入rd.break语句的含义是让系统在挂载根文件系统之前进入紧急shell模式。
> 具体来说，rd.break会在系统挂载初始根文件系统之后的根挂载流程阶段停止系统引导，让系统进入一个最小化的环境，此时根文件系统是只读的。这样你可以在这个紧急shell中对系统进行检查、修复、调试等操作。

"ctrl + x"保存退出, 随后系统会进入紧急shell模式

> 紧急shell模式 与 普通用户模式 区别
> 1. **权限限制：**
>    - 在紧急shell模式下（也称为单用户模式或恢复模式），系统会启动一个最小化的环境，只有 root 用户可以访问，用户拥有最高权限，可以执行系统修复和维护操作。
>    - 在普通用户模式下，用户使用自己的账户登录系统，并且权限受到限制，无法进行更改> 系统级别的操作。
> 2. **功能限制：**
>    - 紧急shell模式下通常只提供最基本的文件系统访问和修复功能，常用于修复系统崩溃或无法启动的问题。
>    - 在普通用户模式下，用户可以访问系统上安装的各种应用程序和资源，并可以进行一般的日常操作。
> 3. **网络连接：**
>    - 在紧急shell模式下，通常网络服务是禁用的，以确保系统安全，而在普通用户模式下，用户可以访问网络并进行网络连接。

将文件系统进行重新挂载
``` mount -o remount,rw /sysroot ```

> 语法格式：mount [参数]  [设备名]  [目录名] 

> 常用参数：
> -a 加载/etc/fstab文件中记录的所有文件系统  
> -r 将文件系统设置为只读模式 
> -F 为每个设备创建出一个新的挂载版本 
> -t 挂载指定文件类型的设备分区 
> -h 显示帮助信息 
> -U 挂载指定UUID的设备分区 
> -l 显示已加载的文件系统列表 
> -V 显示版本信息
> -L 挂载具有指定标签的分区 
> -w 以读写方式挂载文件系统 
> -n 加载没有写入/etc/mtab文件中的文件系统

修改文件系统根目录
``` chroot /sysroot ```

> **语　　法：** chroot [--help]  [--version]  [目的目录]  [执行指令...] 


> **补充说明：**把根目录换成指定的目的目录。 
> **参　　数：**
>　--help 　在线帮助。
>　--version 　显示版本信息。

 修改密码
``` passwd ```

到这里密码已经修改完了

``` exit ``` 退出当前文件系统, ``` reboot ``` 重新启动


### find

> 功能说明：查找文件或目录。
>
> 语　　法：find [目录...] [-amin <分钟>] [-anewer <参考文件或目录>] [-atime <24小时数>] [-cmin <分钟>] [-cnewer <参考文件或目录>] [-ctime <24小时数>] [-daystart] [-depyh] [-empty] [-exec <执行指令>] [-false] [-fls <列表文件>] [-follow] [-fprint <列表文件>] [-fprint0 <列表文件>] [-fprintf <列表文件><输出格式>] [-fstype <文件系统类型>] [-gid <群组识别码>] [-group <群组名称>] [-help] [-ilname <范本样式>] [-iname <范本样式>] [-inum <inode编号>] [-ipath <范本样式>] [-iregex <范本样式>] [-links <连接数目>] [-lname <范本样式>] [-ls] [-maxdepth <目录层级>] [-mindepth <目录层级>] [-mmin <分钟>] [-mount]  
> [-mtime <24小时数>] [-name <范本样式>] [-newer <参考文件或目录>] [-nogroup] [noleaf]  [-nouser] [-ok <执行指令>] [-path <范本样式>] [-perm <权限数值>] [-print] [-print0] [-printf <输出格式>] [-prune] [-regex <范本样式>] [-size <文件大小>] [-true] [-type <文件类型>] [-uid <用户识别码>] [-used <日数>] [-user <拥有者名称>] [-version] [-xdev] [-xtype <文件类型>] 
>
> 补充说明：find指令用于查找符合条件的文件。任何位于参数之前的字符串都将被视为欲查找的目录。
>
> 参　　数：
> 　-amin<分钟> 　查找在指定时间曾被存取过的文件或目录，单位以分钟计算。 
> 　-anewer<参考文件或目录> 　查找其存取时间较指定文件或目录的存取时间更接近现在的文件或目录。 
> 　-atime<24小时数> 　查找在指定时间曾被存取过的文件或目录，单位以24小时计算。 
> 　-cmin<分钟> 　查找在指定时间之时被更改的文件或目录。 
> 　-cnewer<参考文件或目录> 　查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录。 
> 　-ctime<24小时数> 　查找在指定时间之时被更改的文件或目录，单位以24小时计算。 
> 　-daystart 　从本日开始计算时间。 
> 　-depth 　从指定目录下最深层的子目录开始查找。 
> 　-expty 　寻找文件大小为0 Byte的文件，或目录下没有任何子目录或文件的空目录。 
> 　-exec<执行指令> 　假设find指令的回传值为True，就执行该指令。 
> 　-false 　将find指令的回传值皆设为False。 
> 　-fls<列表文件> 　此参数的效果和指定"-ls"参数类似，但会把结果保存为指定的列表文件。 
> 　-follow 　排除符号连接。 
> 　-fprint<列表文件> 　此参数的效果和指定"-print"参数类似，但会把结果保存成指定的列表文件。 
> 　-fprint0<列表文件> 　此参数的效果和指定"-print0"参数类似，但会把结果保存成指定的列表文件。 
> 　-fprintf<列表文件><输出格式> 　此参数的效果和指定"-printf"参数类似，但会把结果保存成指定的列表文件。 
> 　-fstype<文件系统类型> 　只寻找该文件系统类型下的文件或目录。 
> 　-gid<群组识别码> 　查找符合指定之群组识别码的文件或目录。 
> 　-group<群组名称> 　查找符合指定之群组名称的文件或目录。 
> 　-help或--help 　在线帮助。 
> 　-ilname<范本样式> 　此参数的效果和指定"-lname"参数类似，但忽略字符大小写的差别。 
> 　-iname<范本样式> 　此参数的效果和指定"-name"参数类似，但忽略字符大小写的差别。 
> 　-inum<inode编号> 　查找符合指定的inode编号的文件或目录。 
> 　-ipath<范本样式> 　此参数的效果和指定"-ipath"参数类似，但忽略字符大小写的差别。 
> 　-iregex<范本样式> 　此参数的效果和指定"-regexe"参数类似，但忽略字符大小写的差别。 
> 　-links<连接数目> 　查找符合指定的硬连接数目的文件或目录。 
> 　-iname<范本样式> 　指定字符串作为寻找符号连接的范本样式。 
> 　-ls 　假设find指令的回传值为True，就将文件或目录名称列出到标准输出。 
> 　-maxdepth<目录层级> 　设置最大目录层级。 
> 　-mindepth<目录层级> 　设置最小目录层级。 
> 　-mmin<分钟> 　查找在指定时间曾被更改过的文件或目录，单位以分钟计算。 
> 　-mount 　此参数的效果和指定"-xdev"相同。 
> 　-mtime<24小时数> 　查找在指定时间曾被更改过的文件或目录，单位以24小时计算。 
> 　-name<范本样式> 　指定字符串作为寻找文件或目录的范本样式。 
> 　-newer<参考文件或目录> 　查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录。 
> 　-nogroup 　找出不属于本地主机群组识别码的文件或目录。 
> 　-noleaf 　不去考虑目录至少需拥有两个硬连接存在。 
> 　-nouser 　找出不属于本地主机用户识别码的文件或目录。 
> 　-ok<执行指令> 　此参数的效果和指定"-exec"参数类似，但在执行指令之前会先询问用户，若回答"y"或"Y"，则放弃执行指令。 
> 　-path<范本样式> 　指定字符串作为寻找目录的范本样式。 
> 　-perm<权限数值> 　查找符合指定的权限数值的文件或目录。 
> 　-print 　假设find指令的回传值为True，就将文件或目录名称列出到标准输出。格式为每列一个名称，每个名称之前皆有"./"字符串。 
> 　-print0 　假设find指令的回传值为True，就将文件或目录名称列出到标准输出。格式为全部的名称皆在同一行。 
> 　-printf<输出格式> 　假设find指令的回传值为True，就将文件或目录名称列出到标准输出。格式可以自行指定。 
> 　-prune 　不寻找字符串作为寻找文件或目录的范本样式。 
> 　-regex<范本样式> 　指定字符串作为寻找文件或目录的范本样式。 
> 　-size<文件大小> 　查找符合指定的文件大小的文件。 
> 　-true 　将find指令的回传值皆设为True。 
> 　-typ<文件类型> 　只寻找符合指定的文件类型的文件。 
> 　-uid<用户识别码> 　查找符合指定的用户识别码的文件或目录。 
> 　-used<日数> 　查找文件或目录被更改之后在指定时间曾被存取过的文件或目录，单位以日计算。 
> 　-user<拥有者名称> 　查找符合指定的拥有者名称的文件或目录。 
> 　-version或--version 　显示版本信息。 
> 　-xdev 　将范围局限在先行的文件系统中。 
> 　-xtype<文件类型> 　此参数的效果和指定"-type"参数类似，差别在于它针对符号连接检查。

### grep

> **功能说明：**查找文件里符合条件的字符串。  
>
> **语　　法：**grep [-abcEFGhHilLnqrsvVwxy]  [-A<显示列数>]  [-B<显示列数>]  [-C<显示列数>]  [-d<进行动作>]  [-e<范本样式>]  [-f<范本文件>]  [--help]  [范本样式]  [文件或目录...]   
>
> **补充说明：**grep指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设grep指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为“-”，则grep指令会从标准输入设备读取数据。  
>
> **参　　数：**  
>
> -a或--text  不要忽略二进制的数据。 
>
>  -A<显示列数>或--after-context=<显示列数>  除了显示符合范本样式的那一列之外，并显示该列之后的内容。 
>
>  -b或--byte-offset  在显示符合范本样式的那一列之前，标示出该列第一个字符的位编号。 
>
>  -B<显示列数>或--before-context=<显示列数>  除了显示符合范本样式的那一列之外，并显示该列之前的内容。  
>
> -c或--count  计算符合范本样式的列数。  
>
> -C<显示列数>或--context=<显示列数>或-<显示列数>  除了显示符合范本样式的那一列之外，并显示该列之前后的内容。  
>
> -d<进行动作>或--directories=<进行动作>  当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。  
>
> -e<范本样式>或--regexp=<范本样式>  指定字符串做为查找文件内容的范本样式。 
>
>  -E或--extended-regexp  将范本样式为延伸的普通表示法来使用。  
>
> -f<范本文件>或--file=<范本文件>  指定范本文件，其内容含有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每列一个范本样式。  
>
> -F或--fixed-regexp  将范本样式视为固定字符串的列表。  
>
> -G或--basic-regexp  将范本样式视为普通的表示法来使用。  
>
> -h或--no-filename  在显示符合范本样式的那一列之前，不标示该列所属的文件名称。  
>
> -H或--with-filename  在显示符合范本样式的那一列之前，表示该列所属的文件名称。  
>
> -i或--ignore-case  忽略字符大小写的差别。  
>
> -l或--file-with-matches  列出文件内容符合指定的范本样式的文件名称。 
>
>  -L或--files-without-match  列出文件内容不符合指定的范本样式的文件名称。  
>
> -n或--line-number  在显示符合范本样式的那一列之前，标示出该列的列数编号。  
>
> -q或--quiet或--silent  不显示任何信息。  
>
> -r或--recursive  此参数的效果和指定“-d recurse”参数相同。 
>
>  -s或--no-messages  不显示错误信息。 
>
>  -v或--revert-match  反转查找。  
>
> -V或--version  显示版本信息。  
>
> -w或--word-regexp  只显示全字符合的列。  
>
> -x或--line-regexp  只显示全列符合的列。  
>
> -y  此参数的效果和指定“-i”参数相同。  
>
> --help  在线帮助。
***
> *** "|"*** 管道符
> ``` ll | grep bash ```
>
> > -rw-------  1 root root 2542 Feb 27 15:52 .bash_history
> > -rw-r--r--  1 root root 3233 Feb 27 10:24 .bashrc
> 
> ***将前一个命令结果传递给下一个命令***
